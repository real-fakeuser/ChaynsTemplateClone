export default function uploadCloudImage(file) {
    var form = new FormData();
    form.append('files', file);

    var serverUrl = 'https://tsimg.space/v1/images';

    return fetch(serverUrl, {
        method: 'POST',
        headers: {
            Authorization: chayns.env.user.isAuthenticated ? 'Bearer ' + chayns.env.user.tobitAccessToken : ''
        },
        body: form
    }).then(function (res) {
        if (res.status !== 200) {
            // eslint-disable-next-line prefer-promise-reject-errors
            return Promise.reject({
                statusCode: res.statusCode,
                statusMessage: res.statusText,
                data: res
            });
        }

        return res.json();
    });
}